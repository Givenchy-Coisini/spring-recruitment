## 1.进程和线程的区别

- 什么是进程
`cpu`是计算机的核心，承担所有的计算任务，`进程`是`cpu`资源分配的最小单位

进行中的程序，我们可以将他理解为一个可以独立运行且拥有自己的资源空间的任务程序
`进程` 包括运行中的程序和程序所使用到的内存和系统资源
> CPU可以有很多进程，我们的电脑每打开一个软件就会产生一个或多个进程，为什么电脑运行的软件多就会卡，是因为CPU给每个进程分配资源空间，但是一个CPU一共就那么多资源，分出去越多，越卡，每个进程之间是相互独立的，CPU在运行一个进程时，其他的进程处于非运行状态，CPU使用 时间片轮转调度算法 来实现同时运行多个进程

- 什么是线程
`线程`是`cpu`调度的最小单位
线程是建立在进程的基础上的一次程序运行单位，通俗点就是线程就是程序中的一个执行流， 一个进程可以有一个或者多个线程
一个进程中只有一个执行流称作单线程，即程序执行时，所走的程序路径按照连续顺序排下来，前面的必须处理好，后面的才会执行
一个进程中有多个执行流称作多线程，即在一个程序中可以同时运行多个不同的线程来执行不同的任务，
也就是说允许单个程序创建多个并行执行的线程来完成各自的任务

- 进程和线程的区别

进程是操作系统分配资源的最小单位，线程是程序执行的最小单位
一个进程由一个或多个线程组成，线程可以理解为是一个进程中代码的不同执行路线
进程之间相互独立，但同一进程下的各个线程间共享程序的内存空间(包括代码段、数据集、堆等)及一些进程级的资源(如打开文件和信号)
调度和切换：线程上下文切换比进程上下文切换要快得多

- 多进程和多线程
多进程：多进程指的是在同一个时间里，同一个计算机系统中如果允许两个或两个以上的进程处于运行状态。多进程带来的好处是明显的，比如大家可以在网易云听歌的同时打开编辑器敲代码，编辑器和网易云的进程之间不会相互干扰

多线程：多线程是指程序中包含多个执行流，即在一个程序中可以同时运行多个不同的线程来执行不同的任务，也就是说允许单个程序创建多个并行执行的线程来完成各自的任务


## 2.死锁的原理和四要素
死锁是指多个进程在运行过程中因争夺资源而引起，当进程处于这种僵持状态的时候，若没有外力作用，他们都将无法再向前推进。

> 比如一扇门，你要出我要进，你在等我让，我在等你让，这时就陷入了死循环，就形成了死锁。

- 可剥夺资源和不可剥夺资源
1、可剥夺资源：是指某进程在获得这类资源后，该进程可以再被其他进程或系统剥夺，`cpu`和主存均属于可剥夺性资源
2、不可剥夺资源：当系统把这类资源分配给某进程后，再不能强行回收，只能在进程用完后自行释放，如磁带机、打印机等。

- 产生死锁是因为竞争不可剥夺资源

- 产生死锁的四个必要条件
1、互斥条件：进程对所分配到的资源不允许其他进程进行访问，若其他进程访问该资源，只能等待，直到占有该资源的进程使用完成后释放该资源
2、请求和保持条件：进程获得一定的资源之后，又对其他资源发出请求，但是该资源可能被其他进程占有，此时请求阻塞，但又对自己获得的资源保持不放
3、不可剥夺条件：是指进程已经获得的资源，在未完成使用之前，不可被剥夺，只能在使用完成之后自己释放
4、循环等待条件：是指进程发生死锁后，必然存在一个进程-资源之间的环形链

- 解决死锁的基本办法
1、预防死锁
1.1、资源一次性分配：一次性分配所有资源，这样就不会再有请求了（破坏请求条件）
1.2、只要有一个资源得不到分配，就也不给这个进程分配其他的资源（破坏保持条件）
1.3、可剥夺资源：即当某进程获得了部分资源，但得不到其它资源，则释放已占有的资源（破坏不可剥夺条件）
1.4、资源有序分配法：系统给每类资源赋予一个编号，每一个进程按编号递增的顺序请求资源，释放则相反（破坏环路等待条件）
2、避免死锁
银行家算法
首先需要定义状态和安全状态的概念。系统的状态是当前给进程分配的资源情况。因此，状态包含两个向量Resource（系统中每种资源的总量）和Available（未分配给进程的每种资源的总量）及两个矩阵Claim（表示进程对资源的需求）和Allocation（表示当前分配给进程的资源）。安全状态是指至少有一个资源分配序列不会导致死锁。当进程请求一组资源时，假设同意该请求，从而改变了系统的状态，然后确定其结果是否还处于安全状态。如果是，同意这个请求；如果不是，阻塞该进程知道同意该请求后系统状态仍然是安全的。
3、检测死锁
3.1、首先为每个进程和每个资源指定一个唯一的号码
3.2、然后建立资源分配表和进程等待表
4、解锁死锁
4.1、剥夺资源：从其他进程剥夺足够数量的资源给死锁进程，以接触死锁状态
4.2、撤销进程
## 3.进程通信

## 4.如何保证多线程安全